
[[annexB]]
[appendix]
== S-104 Comprehensive Model Including Application Schema and Carrier Metadata (UML Diagrams)

<<fig_B-1>> depicts the various components of the S-104 model. The
Meta-features and Exchange Set Metadata components are empty because
S-104 does not define any meta-features or extend S-100 Exchange Catalogue
classes. <<fig_B-2>> depicts the derivation of the S-104 packages
from various S-100 components.

[[fig_B-1]]
.S-104 Model components
image::figure-b-1.png["",518,353]

[[fig_B-2]]
.Derivations from S-100
image::figure-b-2.png["",423,406]

<<fig_B-3>> depicts the coverage types used in S-104 and their realizations
from the conceptual coverages in <<IHO_S_100,part=8>> and <<ISO_19123_2005>>.
This is a more detailed version of <<fig_4-3>>. Note that the realizations
are not directly from the <<IHO_S_100,part=8>> and <<ISO_19123_2005>>
classes, but via corresponding notional classes for the HDF5 implementations
of the various data coding formats (not included in this diagram).
For example, *S104_RegularGrid* is a notional extension of a notional
S-100 class Part10c::S100_HDF_RegularGrid which encapsulates the encoding
of _dataCodingFormat_ 2 in HDF5. The notional classes are omitted
to reduce diagram clutter.

The implementation of most attributes in the <<IHO_S_100,part=8>>
model by <<IHO_S_100,part=10c>> closely follows the names and types
of the attributes. Certain attributes in the <<IHO_S_100,part=8>>
and <<ISO_19123_2005>> models are simplified in <<IHO_S_100,part=10c>>
HDF5 implementation, as follows:

* HDF5 Regular Grid (data coding formats 2) implements S100_IF_Grid:

** The attribute _origin_ is implemented in the form of two HDF5 attributes,
_gridOriginLatitude_ and _gridOriginLongitude_.
** The attribute _offsetVectors_ is implemented in the form of two
HDF5 attributes, _gridSpacingLongitudinal_ and _gridSpacingLatitudinal_.

The _rangeType_ attribute common to all coverage types is implemented
implicitly in the S-100 Feature Catalogue's binding of attributes
to a feature and in the name/datatype information in feature information
datasets in the feature information group (<<IHO_S_100,part=10c,table=10c-8>>).

[%landscape]
<<<

[[fig_B-3]]
.Spatial Types - Coverages with Realizations from <<IHO_S_100,part=8>> and <<ISO_19123_2005>>
image::figure-b-3.png["",926,179]

<<fig_B-4>> depicts the domain features. The *WaterLevel* feature
and its attributes realise the values record in the <<IHO_S_100,part=8>>
and <<ISO_19123_2005>> coverages models.

[[fig_B-4]]
.Domain Objects
image::figure-b-4.png["",351,107]

<<fig_B-5>> depicts the external catalogue metadata classes
(the same information as <<fig_12-4>>).

<<fig_B-6>> depicts the same information as Figures <<fig_12-5,droploc%>>
through <<fig_12-9,droploc%>>, organised by coverage type instead
of structural level. Different levels in the HDF5 structure (root,
feature type, feature instance, and value) are indicated by backgrounds
of different colours.

[[fig_B-5]]
.Exchange Set class details
image::figure-b-5.png["",880,525]

[[fig_B-6]]
.All carrier metadata for coverage type Regular Grid (data coding format 2)
image::figure-b-6.png["",886,575]

[%portrait]
<<<
